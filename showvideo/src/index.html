<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>test show video</title>
</head>

<body>
    <h1>Video List</h1>
    <div id="app"></div>
</body>

</html>

<script type="text/javascript"
        src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript"
        src="https://unpkg.com/axios/dist/axios.min.js"></script>

<!-- <script type="javascript"
            src="./service.js"></script>
    <script type="javascript"
            src="./ctrl/router.js"></script> -->

<script>
    $().ready(function () {

        const url = 'http://127.0.0.1:8080/';

        async function getDiscovery() {
            try {
                const response = await axios.get(url + 'discovery');
                const data = response.data.items;

                $.each(data, function (key, value) {

                    const {
                        etag,
                        id,
                        kind,
                        snippet
                    } = value;

                    // const title = snippet.title;
                    // const thumbnails = snippet.thumbnails["default"];

                    $('#app').append(`
                    <div class="item">
                        <p>${snippet.title}</p>                    
                        <iframe width="560" height="315" 
                        src="https://www.youtube.com/embed/${id.videoId}" 
                        frameborder="0" allow="accelerometer; autoplay; 
                        encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    `);
                });

                console.log(data);
            } catch (error) {
                alert('oops');
                console.error(error);
            }
        }

        getDiscovery();

    });
</script>

<style>
    body {
        padding: 10px;
    }

    h1 {
        text-align: center;
    }

    #app {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
    }

    #app>.item {
        margin: 0 5px;
        max-width: 560px;
    }

</style>
